var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
parcelHelpers.export(exports, "default", ()=>ServerStyleSheets
);
var _extends = require("@babel/runtime/helpers/esm/extends");
var _extendsDefault = parcelHelpers.interopDefault(_extends);
var _classCallCheck = require("@babel/runtime/helpers/esm/classCallCheck");
var _classCallCheckDefault = parcelHelpers.interopDefault(_classCallCheck);
var _createClass = require("@babel/runtime/helpers/esm/createClass");
var _createClassDefault = parcelHelpers.interopDefault(_createClass);
var _react = require("react");
var _reactDefault = parcelHelpers.interopDefault(_react);
var _jss = require("jss");
var _stylesProvider = require("../StylesProvider");
var _stylesProviderDefault = parcelHelpers.interopDefault(_stylesProvider);
var _createGenerateClassName = require("../createGenerateClassName");
var _createGenerateClassNameDefault = parcelHelpers.interopDefault(_createGenerateClassName);
var ServerStyleSheets = /*#__PURE__*/ function() {
    function ServerStyleSheets1() {
        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
        };
        _classCallCheckDefault.default(this, ServerStyleSheets1);
        this.options = options;
    }
    _createClassDefault.default(ServerStyleSheets1, [
        {
            key: "collect",
            value: function collect(children) {
                // This is needed in order to deduplicate the injection of CSS in the page.
                var sheetsManager = new Map(); // This is needed in order to inject the critical CSS.
                this.sheetsRegistry = new _jss.SheetsRegistry(); // A new class name generator
                var generateClassName = _createGenerateClassNameDefault.default();
                return(/*#__PURE__*/ _reactDefault.default.createElement(_stylesProviderDefault.default, _extendsDefault.default({
                    sheetsManager: sheetsManager,
                    serverGenerateClassName: generateClassName,
                    sheetsRegistry: this.sheetsRegistry
                }, this.options), children));
            }
        },
        {
            key: "toString",
            value: function toString() {
                return this.sheetsRegistry ? this.sheetsRegistry.toString() : '';
            }
        },
        {
            key: "getStyleElement",
            value: function getStyleElement(props) {
                return(/*#__PURE__*/ _reactDefault.default.createElement('style', _extendsDefault.default({
                    id: 'jss-server-side',
                    key: 'jss-server-side',
                    dangerouslySetInnerHTML: {
                        __html: this.toString()
                    }
                }, props)));
            }
        }
    ]);
    return ServerStyleSheets1;
}();
